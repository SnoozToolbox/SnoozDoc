.. _Detections_Cohort_Review:

===============================
Detections Cohort Review
===============================

Description
-----------------

A tool to explore, clean (such as removing bad channels or renaming channels), and transpose the 'Detailed Events Cohort Report' to have one subject per row.

The "Detailed events cohort report" is generated by the :ref:`Spindle_detection_Martin` tool or the :ref:`Slow_wave_detection` tool in Snooz.

.. warning::

   The option to generate the cohort report has to be checked by the user on step "4 - Output Files" in those 2 tools.

The generated report includes the same variable names as the input report. However, in the transposed report, the channel label is concatenated to the variable name as a suffix.
I.e. ``total_spindle_count`` from the spindle cohort report becomes ``total_spindle_count_EEG C3-OL`` for the channel ``EEG C3-OL``.

Steps
-----------------

**1 - Input Files**

Detailed Events Cohort Report : 

   Add your reports generated by the event detector tool.  You can append more than one report. 
  
Channel label :

   The channel label is editable by double-clicking on the name.  You can change the channel name at the subject level or at the cohort level. A channel label changed at the cohort level will be effective to all the subjects loaded.  Uncheck a channel to remove it.

Region Of Interest : 

	You can add ROI at the cohort level to average many channels together.  Once you press the "Add ROI" button : check the channels to include in the ROI (this list will be adapted to the cohort loaded).  Check the blank option if you want the ROI empty (blank) when data is missing for the mean otherwise missing data is just ignored.

   .. warning::
      
      Rename your channel labels first. Adding the ROIs must be the final step.

**2 - Output Files**

Check the reports you want to generate:

   * the report cleaned (with edited channels)
   * the report transposed

If you want to export the transposed report, define how to average the events characteristics across the recording.

   * Select "Total" to output the average through the whole recording.
   * Select "Distribution per sleep cycle" to output the average per sleep cycle, from sleep cycle 1 to 9.  The start point is the sleep onset.

Define the filename to save the exported files (the sufix _clean or _transposed will be added to the filename)
The output file is a .tsv (tab separated values) file. 

.. Warning::
   
   The current output is added (appended) to the existing output file.